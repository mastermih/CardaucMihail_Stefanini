2024-10-08 10:10:58 [MessageBroker-5] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 8, active threads = 2, queued tasks = 0, completed tasks = 6]
2024-10-08 10:10:58 [MessageBroker-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully expired 0 unconfirmed orders
2024-10-08 10:10:58 [MessageBroker-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully expired 0 unconfirmed orders
2024-10-08 10:10:58 [MessageBroker-1] INFO  c.I.o.entity.OrderCleanupService - Expired Orders: 0
2024-10-08 10:40:58 [MessageBroker-5] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 1, completed tasks = 8]
2024-10-08 11:00:00 [MessageBroker-6] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully expired 0 unconfirmed orders
2024-10-08 11:00:00 [MessageBroker-6] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully expired 0 unconfirmed orders
2024-10-08 11:00:00 [MessageBroker-6] INFO  c.I.o.entity.OrderCleanupService - Expired Orders: 0
2024-10-08 11:10:58 [MessageBroker-2] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 1, completed tasks = 10]
2024-10-08 11:25:47 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2024-10-08 11:25:47 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@71d0b8a4]]
2024-10-08 11:25:47 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2024-10-08 11:26:06 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2024-10-08 11:26:06 [main] INFO  c.I.o.OrderManagementApplication - Starting OrderManagementApplication using Java 17.0.11 with PID 9064 (C:\Users\MCARDAUC\Desktop\order-management\target\classes started by mcardauc in C:\Users\MCARDAUC\Desktop\order-management)
2024-10-08 11:26:06 [main] INFO  c.I.o.OrderManagementApplication - No active profile set, falling back to 1 default profile: "default"
2024-10-08 11:26:08 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2024-10-08 11:26:08 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2024-10-08 11:26:08 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2024-10-08 11:26:08 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2024-10-08 11:26:08 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-10-08 11:26:08 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1929 ms
2024-10-08 11:26:10 [main] INFO  liquibase.changelog - Reading from test.DATABASECHANGELOG
2024-10-08 11:26:10 [main] INFO  liquibase.executor - Changelog query completed.
2024-10-08 11:26:11 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@57839834, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3355b8ff, org.springframework.security.web.context.SecurityContextHolderFilter@1592e540, org.springframework.security.web.header.HeaderWriterFilter@570ed9c, org.springframework.web.filter.CorsFilter@32646ecf, org.springframework.security.web.authentication.logout.LogoutFilter@34bf66af, com.ImperioElevator.ordermanagement.security.JwtFilter@84f51d9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4449b273, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@117fb9ba, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@68f9e807, org.springframework.security.web.session.SessionManagementFilter@2b400bd0, org.springframework.security.web.access.ExceptionTranslationFilter@74a5bef0, org.springframework.security.web.access.intercept.AuthorizationFilter@5c3710b3]
2024-10-08 11:26:11 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2024-10-08 11:26:11 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2024-10-08 11:26:11 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2024-10-08 11:26:11 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@467a2584]]
2024-10-08 11:26:11 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2024-10-08 11:26:11 [main] INFO  c.I.o.OrderManagementApplication - Started OrderManagementApplication in 5.191 seconds (process running for 5.785)
2024-10-08 11:26:11 [main] INFO  c.I.o.OrderManagementApplication - Application started successfully
2024-10-08 11:26:44 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-08 11:26:44 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-10-08 11:26:44 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-10-08 11:26:44 [http-nio-8080-exec-2] WARN  o.s.c.LocalVariableTableParameterNameDiscoverer - Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.ImperioElevator.ordermanagement.controller.OrderController
2024-10-08 11:26:44 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL to find OrderProducts by orderId: SELECT * FROM order_product WHERE order_id = ?
2024-10-08 11:26:44 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL to find OrderProducts by orderId: SELECT * FROM order_product WHERE order_id = ?
2024-10-08 11:26:44 [http-nio-8080-exec-2] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully retrieved OrderProducts for orderId: 67
2024-10-08 11:26:44 [http-nio-8080-exec-2] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully retrieved OrderProducts for orderId: 67
2024-10-08 11:26:44 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:26:44 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:26:44 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Selecting the order token with query: SELECT token_value FROM token WHERE order_id = ? AND token_type = 'ORDER' AND is_enabled = true
2024-10-08 11:26:44 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Selecting the order token with query: SELECT token_value FROM token WHERE order_id = ? AND token_type = 'ORDER' AND is_enabled = true
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:26:45 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 11:26:45 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 68
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 68
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@375b61ad
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@375b61ad
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 2 with payload com.ImperioElevator.ordermanagement.entity.Notification@375b61ad
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 2 with payload com.ImperioElevator.ordermanagement.entity.Notification@375b61ad
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@375b61ad
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@375b61ad
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@375b61ad
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@375b61ad
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:26:45 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:26:45 [http-nio-8080-exec-4] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 68
2024-10-08 11:26:45 [http-nio-8080-exec-4] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 68
2024-10-08 11:26:50 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL for order status update: UPDATE orders SET order_status = ?, updated_date = ? WHERE id = ?
2024-10-08 11:26:50 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL for order status update: UPDATE orders SET order_status = ?, updated_date = ? WHERE id = ?
2024-10-08 11:26:50 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully updated Order status for id: 67
2024-10-08 11:26:50 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully updated Order status for id: 67
2024-10-08 11:26:58 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:26:58 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:26:58 [http-nio-8080-exec-8] WARN  o.s.c.LocalVariableTableParameterNameDiscoverer - Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.ImperioElevator.ordermanagement.controller.UserController
2024-10-08 11:26:58 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:26:58 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:26:58 [http-nio-8080-exec-9] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:26:58 [http-nio-8080-exec-9] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:26:58 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:26:58 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:26:58 [http-nio-8080-exec-10] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:26:58 [http-nio-8080-exec-10] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:27:11 [MessageBroker-3] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 6], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 3]
2024-10-08 11:37:11 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2024-10-08 11:37:11 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@467a2584]]
2024-10-08 11:37:11 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2024-10-08 11:37:30 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2024-10-08 11:37:30 [main] INFO  c.I.o.OrderManagementApplication - Starting OrderManagementApplication using Java 17.0.11 with PID 6728 (C:\Users\MCARDAUC\Desktop\order-management\target\classes started by mcardauc in C:\Users\MCARDAUC\Desktop\order-management)
2024-10-08 11:37:30 [main] INFO  c.I.o.OrderManagementApplication - No active profile set, falling back to 1 default profile: "default"
2024-10-08 11:37:32 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2024-10-08 11:37:32 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2024-10-08 11:37:32 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2024-10-08 11:37:32 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2024-10-08 11:37:32 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-10-08 11:37:32 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2005 ms
2024-10-08 11:37:33 [main] INFO  liquibase.changelog - Reading from test.DATABASECHANGELOG
2024-10-08 11:37:33 [main] INFO  liquibase.executor - Changelog query completed.
2024-10-08 11:37:34 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@41e7a544, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b66ac74, org.springframework.security.web.context.SecurityContextHolderFilter@520c3dcb, org.springframework.security.web.header.HeaderWriterFilter@39a865c1, org.springframework.web.filter.CorsFilter@573870cb, org.springframework.security.web.authentication.logout.LogoutFilter@727956bb, com.ImperioElevator.ordermanagement.security.JwtFilter@5353dd09, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b347439, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d1b3620, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5b88af70, org.springframework.security.web.session.SessionManagementFilter@7286827b, org.springframework.security.web.access.ExceptionTranslationFilter@e3c36d, org.springframework.security.web.access.intercept.AuthorizationFilter@18ac4af6]
2024-10-08 11:37:34 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2024-10-08 11:37:34 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2024-10-08 11:37:34 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2024-10-08 11:37:34 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@75f65d54]]
2024-10-08 11:37:34 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2024-10-08 11:37:34 [main] INFO  c.I.o.OrderManagementApplication - Started OrderManagementApplication in 4.931 seconds (process running for 5.564)
2024-10-08 11:37:34 [main] INFO  c.I.o.OrderManagementApplication - Application started successfully
2024-10-08 11:38:34 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 1, completed tasks = 0]
2024-10-08 11:38:41 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-08 11:38:41 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-10-08 11:38:41 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-10-08 11:38:41 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 11:38:41 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 11:38:41 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:38:41 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:38:41 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 11:38:41 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 11:38:41 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 69
2024-10-08 11:38:41 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 69
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@1e12eec7
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@1e12eec7
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 2 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e12eec7
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 2 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e12eec7
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e12eec7
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e12eec7
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e12eec7
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e12eec7
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:38:42 [http-nio-8080-exec-1] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:38:42 [http-nio-8080-exec-1] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 69
2024-10-08 11:38:42 [http-nio-8080-exec-1] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 69
2024-10-08 11:43:59 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2024-10-08 11:43:59 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@75f65d54]]
2024-10-08 11:43:59 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2024-10-08 11:44:16 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2024-10-08 11:44:16 [main] INFO  c.I.o.OrderManagementApplication - Starting OrderManagementApplication using Java 17.0.11 with PID 22892 (C:\Users\MCARDAUC\Desktop\order-management\target\classes started by mcardauc in C:\Users\MCARDAUC\Desktop\order-management)
2024-10-08 11:44:16 [main] INFO  c.I.o.OrderManagementApplication - No active profile set, falling back to 1 default profile: "default"
2024-10-08 11:44:18 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2024-10-08 11:44:18 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2024-10-08 11:44:18 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2024-10-08 11:44:18 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2024-10-08 11:44:18 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-10-08 11:44:18 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1814 ms
2024-10-08 11:44:19 [main] INFO  liquibase.changelog - Reading from test.DATABASECHANGELOG
2024-10-08 11:44:19 [main] INFO  liquibase.executor - Changelog query completed.
2024-10-08 11:44:20 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3dec79f8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5bf7f15f, org.springframework.security.web.context.SecurityContextHolderFilter@93f15f6, org.springframework.security.web.header.HeaderWriterFilter@24068086, org.springframework.web.filter.CorsFilter@14b26e90, org.springframework.security.web.authentication.logout.LogoutFilter@ace2408, com.ImperioElevator.ordermanagement.security.JwtFilter@7114e780, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1dfe5dd1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@727956bb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@11309dd4, org.springframework.security.web.session.SessionManagementFilter@74a5bef0, org.springframework.security.web.access.ExceptionTranslationFilter@14af73e1, org.springframework.security.web.access.intercept.AuthorizationFilter@33eab2e8]
2024-10-08 11:44:20 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2024-10-08 11:44:21 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2024-10-08 11:44:21 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2024-10-08 11:44:21 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@71d0b8a4]]
2024-10-08 11:44:21 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2024-10-08 11:44:21 [main] INFO  c.I.o.OrderManagementApplication - Started OrderManagementApplication in 5.112 seconds (process running for 5.608)
2024-10-08 11:44:21 [main] INFO  c.I.o.OrderManagementApplication - Application started successfully
2024-10-08 11:44:21 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-08 11:44:21 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-10-08 11:44:21 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-10-08 11:44:21 [http-nio-8080-exec-1] WARN  o.s.c.LocalVariableTableParameterNameDiscoverer - Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.ImperioElevator.ordermanagement.controller.UserController
2024-10-08 11:44:21 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:44:21 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:44:21 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:44:21 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:44:21 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:44:21 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:44:21 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:44:21 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:44:21 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:44:21 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:44:23 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:44:23 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:44:25 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:44:25 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:44:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:44:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:44:25 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:44:25 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:44:25 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:44:25 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:44:25 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:44:25 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:44:34 [http-nio-8080-exec-10] WARN  o.s.c.LocalVariableTableParameterNameDiscoverer - Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.ImperioElevator.ordermanagement.controller.OrderController
2024-10-08 11:44:34 [http-nio-8080-exec-10] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL to find OrderProducts by orderId: SELECT * FROM order_product WHERE order_id = ?
2024-10-08 11:44:34 [http-nio-8080-exec-10] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL to find OrderProducts by orderId: SELECT * FROM order_product WHERE order_id = ?
2024-10-08 11:44:34 [http-nio-8080-exec-10] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully retrieved OrderProducts for orderId: 68
2024-10-08 11:44:34 [http-nio-8080-exec-10] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully retrieved OrderProducts for orderId: 68
2024-10-08 11:44:34 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:44:34 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:44:34 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Selecting the order token with query: SELECT token_value FROM token WHERE order_id = ? AND token_type = 'ORDER' AND is_enabled = true
2024-10-08 11:44:34 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Selecting the order token with query: SELECT token_value FROM token WHERE order_id = ? AND token_type = 'ORDER' AND is_enabled = true
2024-10-08 11:44:35 [http-nio-8080-exec-3] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL to find OrderProducts by orderId: SELECT * FROM order_product WHERE order_id = ?
2024-10-08 11:44:35 [http-nio-8080-exec-3] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL to find OrderProducts by orderId: SELECT * FROM order_product WHERE order_id = ?
2024-10-08 11:44:35 [http-nio-8080-exec-3] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully retrieved OrderProducts for orderId: 69
2024-10-08 11:44:35 [http-nio-8080-exec-3] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully retrieved OrderProducts for orderId: 69
2024-10-08 11:44:35 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:44:35 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:44:35 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Selecting the order token with query: SELECT token_value FROM token WHERE order_id = ? AND token_type = 'ORDER' AND is_enabled = true
2024-10-08 11:44:35 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Selecting the order token with query: SELECT token_value FROM token WHERE order_id = ? AND token_type = 'ORDER' AND is_enabled = true
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:44:37 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 11:44:37 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 70
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 70
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@538fdeb2
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@538fdeb2
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 2 with payload com.ImperioElevator.ordermanagement.entity.Notification@538fdeb2
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 2 with payload com.ImperioElevator.ordermanagement.entity.Notification@538fdeb2
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@538fdeb2
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@538fdeb2
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@538fdeb2
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@538fdeb2
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:44:37 [http-nio-8080-exec-5] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:44:37 [http-nio-8080-exec-5] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 70
2024-10-08 11:44:37 [http-nio-8080-exec-5] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 70
2024-10-08 11:44:39 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL for order status update: UPDATE orders SET order_status = ?, updated_date = ? WHERE id = ?
2024-10-08 11:44:39 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL for order status update: UPDATE orders SET order_status = ?, updated_date = ? WHERE id = ?
2024-10-08 11:44:39 [http-nio-8080-exec-10] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully updated Order status for id: 68
2024-10-08 11:44:39 [http-nio-8080-exec-10] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully updated Order status for id: 68
2024-10-08 11:44:40 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL for order status update: UPDATE orders SET order_status = ?, updated_date = ? WHERE id = ?
2024-10-08 11:44:40 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL for order status update: UPDATE orders SET order_status = ?, updated_date = ? WHERE id = ?
2024-10-08 11:44:40 [http-nio-8080-exec-3] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully updated Order status for id: 69
2024-10-08 11:44:40 [http-nio-8080-exec-3] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully updated Order status for id: 69
2024-10-08 11:45:20 [MessageBroker-2] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 15, active threads = 0, queued tasks = 0, completed tasks = 15], outboundChannel[pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 3], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 14]
2024-10-08 11:45:52 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2024-10-08 11:45:52 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@71d0b8a4]]
2024-10-08 11:45:52 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2024-10-08 11:46:08 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2024-10-08 11:46:09 [main] INFO  c.I.o.OrderManagementApplication - Starting OrderManagementApplication using Java 17.0.11 with PID 31176 (C:\Users\MCARDAUC\Desktop\order-management\target\classes started by mcardauc in C:\Users\MCARDAUC\Desktop\order-management)
2024-10-08 11:46:09 [main] INFO  c.I.o.OrderManagementApplication - No active profile set, falling back to 1 default profile: "default"
2024-10-08 11:46:10 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2024-10-08 11:46:10 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2024-10-08 11:46:10 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2024-10-08 11:46:10 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2024-10-08 11:46:11 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-10-08 11:46:11 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1999 ms
2024-10-08 11:46:12 [main] INFO  liquibase.changelog - Reading from test.DATABASECHANGELOG
2024-10-08 11:46:12 [main] INFO  liquibase.executor - Changelog query completed.
2024-10-08 11:46:13 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2932e15f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3d98729a, org.springframework.security.web.context.SecurityContextHolderFilter@5960f17, org.springframework.security.web.header.HeaderWriterFilter@621392ea, org.springframework.web.filter.CorsFilter@2375a976, org.springframework.security.web.authentication.logout.LogoutFilter@2b400bd0, com.ImperioElevator.ordermanagement.security.JwtFilter@8383a14, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@71e7c13f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1c815814, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4bc21e34, org.springframework.security.web.session.SessionManagementFilter@3b347439, org.springframework.security.web.access.ExceptionTranslationFilter@63eea8c4, org.springframework.security.web.access.intercept.AuthorizationFilter@573870cb]
2024-10-08 11:46:13 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2024-10-08 11:46:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2024-10-08 11:46:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2024-10-08 11:46:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6df31abf]]
2024-10-08 11:46:13 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2024-10-08 11:46:13 [main] INFO  c.I.o.OrderManagementApplication - Started OrderManagementApplication in 5.475 seconds (process running for 6.072)
2024-10-08 11:46:13 [main] INFO  c.I.o.OrderManagementApplication - Application started successfully
2024-10-08 11:46:19 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-08 11:46:19 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-10-08 11:46:19 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2024-10-08 11:46:20 [http-nio-8080-exec-1] WARN  o.s.c.LocalVariableTableParameterNameDiscoverer - Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.ImperioElevator.ordermanagement.controller.UserController
2024-10-08 11:46:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:46:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:46:20 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:46:20 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:46:20 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:46:20 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:46:20 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:46:20 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:46:20 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:46:20 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:46:22 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 11:46:22 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 71
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 71
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:46:22 [http-nio-8080-exec-8] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:46:22 [http-nio-8080-exec-8] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 71
2024-10-08 11:46:22 [http-nio-8080-exec-8] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 71
2024-10-08 11:47:13 [MessageBroker-3] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 6], outboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 2], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 13]
2024-10-08 11:57:52 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 11:57:52 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 11:57:52 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 11:57:52 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 11:58:07 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:58:07 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:58:25 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:58:25 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:58:26 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 11:58:26 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 11:58:26 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 11:58:26 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 11:58:26 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:58:26 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:58:28 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:58:28 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:58:28 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:58:28 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 3
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 3
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:58:29 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 3
2024-10-08 11:58:29 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 3
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 72
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 72
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@5a6131f7
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@5a6131f7
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@5a6131f7
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@5a6131f7
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:58:29 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:58:29 [http-nio-8080-exec-4] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 72
2024-10-08 11:58:29 [http-nio-8080-exec-4] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 72
2024-10-08 11:58:31 [http-nio-8080-exec-6] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; For input string: "orders"]
2024-10-08 11:58:38 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:58:38 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:58:56 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 11:58:56 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 11:58:56 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 11:58:56 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 11:59:26 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:59:26 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:59:42 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 11:59:42 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 11:59:42 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 11:59:42 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 11:59:42 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:59:42 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:59:42 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:59:42 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:59:42 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:59:42 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:59:42 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:59:42 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 11:59:42 [http-nio-8080-exec-10] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:59:42 [http-nio-8080-exec-10] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 11:59:53 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:59:53 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:59:54 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 11:59:54 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 11:59:54 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 11:59:54 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 11:59:54 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:59:54 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:59:56 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:59:56 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 11:59:56 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:59:56 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 11:59:57 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 11:59:57 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 73
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 73
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@1792d78
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@1792d78
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON user_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@1792d78
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@1792d78
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:59:57 [http-nio-8080-exec-7] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 11:59:57 [http-nio-8080-exec-7] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 73
2024-10-08 11:59:57 [http-nio-8080-exec-7] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 73
2024-10-08 12:00:00 [MessageBroker-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully expired 0 unconfirmed orders
2024-10-08 12:00:00 [MessageBroker-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully expired 0 unconfirmed orders
2024-10-08 12:00:00 [MessageBroker-4] INFO  c.I.o.entity.OrderCleanupService - Expired Orders: 0
2024-10-08 12:06:58 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2024-10-08 12:06:58 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6df31abf]]
2024-10-08 12:06:58 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2024-10-08 12:07:14 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2024-10-08 12:07:14 [main] INFO  c.I.o.OrderManagementApplication - Starting OrderManagementApplication using Java 17.0.11 with PID 22452 (C:\Users\MCARDAUC\Desktop\order-management\target\classes started by mcardauc in C:\Users\MCARDAUC\Desktop\order-management)
2024-10-08 12:07:14 [main] INFO  c.I.o.OrderManagementApplication - No active profile set, falling back to 1 default profile: "default"
2024-10-08 12:07:16 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2024-10-08 12:07:16 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2024-10-08 12:07:16 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2024-10-08 12:07:16 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2024-10-08 12:07:16 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-10-08 12:07:16 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1711 ms
2024-10-08 12:07:17 [main] INFO  liquibase.changelog - Reading from test.DATABASECHANGELOG
2024-10-08 12:07:17 [main] INFO  liquibase.executor - Changelog query completed.
2024-10-08 12:07:18 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2cff5aa3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b6136eb, org.springframework.security.web.context.SecurityContextHolderFilter@117fb9ba, org.springframework.security.web.header.HeaderWriterFilter@1d06801f, org.springframework.web.filter.CorsFilter@2cce10bc, org.springframework.security.web.authentication.logout.LogoutFilter@4f4d05b3, com.ImperioElevator.ordermanagement.security.JwtFilter@8383a14, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41e7a544, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2739ecc0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@73234691, org.springframework.security.web.session.SessionManagementFilter@1fa18f87, org.springframework.security.web.access.ExceptionTranslationFilter@1fe05fff, org.springframework.security.web.access.intercept.AuthorizationFilter@68f9e807]
2024-10-08 12:07:18 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2024-10-08 12:07:18 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2024-10-08 12:07:18 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2024-10-08 12:07:18 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6df31abf]]
2024-10-08 12:07:18 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2024-10-08 12:07:18 [main] INFO  c.I.o.OrderManagementApplication - Started OrderManagementApplication in 4.429 seconds (process running for 4.976)
2024-10-08 12:07:18 [main] INFO  c.I.o.OrderManagementApplication - Application started successfully
2024-10-08 12:08:18 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 1, completed tasks = 0]
2024-10-08 12:09:38 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-08 12:09:38 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-10-08 12:09:38 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2024-10-08 12:09:38 [http-nio-8080-exec-2] WARN  o.s.c.LocalVariableTableParameterNameDiscoverer - Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.ImperioElevator.ordermanagement.controller.OrderController
2024-10-08 12:09:38 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL to find OrderProducts by orderId: SELECT * FROM order_product WHERE order_id = ?
2024-10-08 12:09:38 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL to find OrderProducts by orderId: SELECT * FROM order_product WHERE order_id = ?
2024-10-08 12:09:38 [http-nio-8080-exec-2] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully retrieved OrderProducts for orderId: 73
2024-10-08 12:09:38 [http-nio-8080-exec-2] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully retrieved OrderProducts for orderId: 73
2024-10-08 12:09:38 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 12:09:38 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 12:09:38 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Selecting the order token with query: SELECT token_value FROM token WHERE order_id = ? AND token_type = 'ORDER' AND is_enabled = true
2024-10-08 12:09:38 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Selecting the order token with query: SELECT token_value FROM token WHERE order_id = ? AND token_type = 'ORDER' AND is_enabled = true
2024-10-08 12:09:43 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL for order status update: UPDATE orders SET order_status = ?, updated_date = ? WHERE id = ?
2024-10-08 12:09:43 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL for order status update: UPDATE orders SET order_status = ?, updated_date = ? WHERE id = ?
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:09:43 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully updated Order status for id: 73
2024-10-08 12:09:43 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully updated Order status for id: 73
2024-10-08 12:09:43 [http-nio-8080-exec-3] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:09:43 [http-nio-8080-exec-3] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 74
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 74
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@47b17bba
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@47b17bba
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@47b17bba
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@47b17bba
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:09:43 [http-nio-8080-exec-3] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:09:43 [http-nio-8080-exec-3] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 74
2024-10-08 12:09:43 [http-nio-8080-exec-3] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 74
2024-10-08 12:10:13 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2024-10-08 12:10:13 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6df31abf]]
2024-10-08 12:10:13 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2024-10-08 12:10:30 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2024-10-08 12:10:30 [main] INFO  c.I.o.OrderManagementApplication - Starting OrderManagementApplication using Java 17.0.11 with PID 31840 (C:\Users\MCARDAUC\Desktop\order-management\target\classes started by mcardauc in C:\Users\MCARDAUC\Desktop\order-management)
2024-10-08 12:10:30 [main] INFO  c.I.o.OrderManagementApplication - No active profile set, falling back to 1 default profile: "default"
2024-10-08 12:10:32 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2024-10-08 12:10:32 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2024-10-08 12:10:32 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2024-10-08 12:10:32 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2024-10-08 12:10:32 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-10-08 12:10:32 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1744 ms
2024-10-08 12:10:33 [main] INFO  liquibase.changelog - Reading from test.DATABASECHANGELOG
2024-10-08 12:10:33 [main] INFO  liquibase.executor - Changelog query completed.
2024-10-08 12:10:34 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@79445efb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1592e540, org.springframework.security.web.context.SecurityContextHolderFilter@35524549, org.springframework.security.web.header.HeaderWriterFilter@4ffa078d, org.springframework.web.filter.CorsFilter@3e2772a9, org.springframework.security.web.authentication.logout.LogoutFilter@74a5bef0, com.ImperioElevator.ordermanagement.security.JwtFilter@7530090a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@280d6a20, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7286827b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4449b273, org.springframework.security.web.session.SessionManagementFilter@63eea8c4, org.springframework.security.web.access.ExceptionTranslationFilter@6ffc6ea7, org.springframework.security.web.access.intercept.AuthorizationFilter@1b8ee69d]
2024-10-08 12:10:35 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2024-10-08 12:10:35 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2024-10-08 12:10:35 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2024-10-08 12:10:35 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@61bf405d]]
2024-10-08 12:10:35 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2024-10-08 12:10:35 [main] INFO  c.I.o.OrderManagementApplication - Started OrderManagementApplication in 5.09 seconds (process running for 5.599)
2024-10-08 12:10:35 [main] INFO  c.I.o.OrderManagementApplication - Application started successfully
2024-10-08 12:10:36 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-08 12:10:36 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-10-08 12:10:36 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2024-10-08 12:10:36 [http-nio-8080-exec-1] WARN  o.s.c.LocalVariableTableParameterNameDiscoverer - Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.ImperioElevator.ordermanagement.controller.OrderController
2024-10-08 12:10:36 [http-nio-8080-exec-1] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL to find OrderProducts by orderId: SELECT * FROM order_product WHERE order_id = ?
2024-10-08 12:10:36 [http-nio-8080-exec-1] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL to find OrderProducts by orderId: SELECT * FROM order_product WHERE order_id = ?
2024-10-08 12:10:36 [http-nio-8080-exec-1] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully retrieved OrderProducts for orderId: 74
2024-10-08 12:10:36 [http-nio-8080-exec-1] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully retrieved OrderProducts for orderId: 74
2024-10-08 12:10:36 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 12:10:36 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 12:10:36 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Selecting the order token with query: SELECT token_value FROM token WHERE order_id = ? AND token_type = 'ORDER' AND is_enabled = true
2024-10-08 12:10:36 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Selecting the order token with query: SELECT token_value FROM token WHERE order_id = ? AND token_type = 'ORDER' AND is_enabled = true
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:10:37 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:10:37 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 75
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 75
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@3c9c89b1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@3c9c89b1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@3c9c89b1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@3c9c89b1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@3c9c89b1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@3c9c89b1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@3c9c89b1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@3c9c89b1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@3c9c89b1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@3c9c89b1
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:10:37 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:10:37 [http-nio-8080-exec-2] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 75
2024-10-08 12:10:37 [http-nio-8080-exec-2] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 75
2024-10-08 12:10:41 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL for order status update: UPDATE orders SET order_status = ?, updated_date = ? WHERE id = ?
2024-10-08 12:10:41 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL for order status update: UPDATE orders SET order_status = ?, updated_date = ? WHERE id = ?
2024-10-08 12:10:41 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully updated Order status for id: 74
2024-10-08 12:10:41 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully updated Order status for id: 74
2024-10-08 12:10:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:10:45 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:10:45 [http-nio-8080-exec-3] WARN  o.s.c.LocalVariableTableParameterNameDiscoverer - Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.ImperioElevator.ordermanagement.controller.UserController
2024-10-08 12:10:45 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:10:45 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:10:45 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:10:45 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:10:45 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:10:45 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:10:45 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:10:45 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:10:48 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:10:48 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:10:48 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:10:48 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:10:48 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:10:48 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:10:48 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:10:48 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:10:48 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:10:48 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:10:57 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:10:57 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:10:57 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:10:57 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:00 [http-nio-8080-exec-6] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; For input string: "orders"]
2024-10-08 12:11:01 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:01 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:16 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 12:11:16 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 12:11:16 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 12:11:16 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 12:11:16 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:16 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:16 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:11:16 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:11:16 [http-nio-8080-exec-3] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:11:16 [http-nio-8080-exec-3] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:11:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:11:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:11:16 [http-nio-8080-exec-6] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:11:16 [http-nio-8080-exec-6] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:11:20 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:11:20 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 76
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 76
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@69453b02
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@69453b02
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@69453b02
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@69453b02
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@69453b02
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@69453b02
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@69453b02
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@69453b02
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@69453b02
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@69453b02
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:11:20 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:11:20 [http-nio-8080-exec-2] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 76
2024-10-08 12:11:20 [http-nio-8080-exec-2] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 76
2024-10-08 12:11:33 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 12:11:33 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 12:11:34 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 12:11:34 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 12:11:34 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 3 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(3)-CONNECTED(3)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 27], outboundChannel[pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 7], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 10]
2024-10-08 12:11:35 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:35 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:38 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 12:11:38 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 12:11:38 [http-nio-8080-exec-3] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 12:11:38 [http-nio-8080-exec-3] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 12:11:38 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:38 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:40 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders for User role: SELECT * FROM orders WHERE user_id = ? ORDER BY id ASC LIMIT ?
2024-10-08 12:11:40 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders for User role: SELECT * FROM orders WHERE user_id = ? ORDER BY id ASC LIMIT ?
2024-10-08 12:11:40 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders for User role
2024-10-08 12:11:40 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders for User role
2024-10-08 12:11:41 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:41 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:43 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 12:11:43 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 12:11:43 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 12:11:43 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 12:11:43 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:43 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:45 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 12:11:45 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 12:11:45 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:45 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 2
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 2
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:11:46 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 2
2024-10-08 12:11:46 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 2
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 77
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 77
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@25fdc3db
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@25fdc3db
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@25fdc3db
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@25fdc3db
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@25fdc3db
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@25fdc3db
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@25fdc3db
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@25fdc3db
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@25fdc3db
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@25fdc3db
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:11:46 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:11:46 [http-nio-8080-exec-4] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 77
2024-10-08 12:11:46 [http-nio-8080-exec-4] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 77
2024-10-08 12:12:00 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:12:00 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:13:03 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 12:13:03 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 12:13:03 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 12:13:03 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 12:13:03 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:13:03 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:13:03 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:13:03 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:13:03 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:13:03 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:13:03 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:13:03 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:13:03 [http-nio-8080-exec-9] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:13:03 [http-nio-8080-exec-9] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:13:08 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:13:08 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:13:11 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 12:13:11 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 12:13:11 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 12:13:11 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 12:13:11 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:13:11 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:13:12 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 12:13:12 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 12:13:12 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:13:12 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:13:17 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:13:17 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 78
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 78
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@3683380f
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@3683380f
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@3683380f
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@3683380f
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@3683380f
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@3683380f
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@3683380f
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@3683380f
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@3683380f
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@3683380f
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:13:17 [http-nio-8080-exec-8] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:13:17 [http-nio-8080-exec-8] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 78
2024-10-08 12:13:17 [http-nio-8080-exec-8] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 78
2024-10-08 12:13:22 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:13:22 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:13:22 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:13:22 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:13:22 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:13:22 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:13:22 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:13:22 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:13:22 [http-nio-8080-exec-9] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:13:22 [http-nio-8080-exec-9] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:13:25 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:13:25 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 79
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 79
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@68c8cee5
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@68c8cee5
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@68c8cee5
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@68c8cee5
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@68c8cee5
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@68c8cee5
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@68c8cee5
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@68c8cee5
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@68c8cee5
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@68c8cee5
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:13:25 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:13:25 [http-nio-8080-exec-4] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 79
2024-10-08 12:13:25 [http-nio-8080-exec-4] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 79
2024-10-08 12:16:23 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2024-10-08 12:16:23 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@61bf405d]]
2024-10-08 12:16:23 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2024-10-08 12:16:40 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2024-10-08 12:16:40 [main] INFO  c.I.o.OrderManagementApplication - Starting OrderManagementApplication using Java 17.0.11 with PID 10956 (C:\Users\MCARDAUC\Desktop\order-management\target\classes started by mcardauc in C:\Users\MCARDAUC\Desktop\order-management)
2024-10-08 12:16:40 [main] INFO  c.I.o.OrderManagementApplication - No active profile set, falling back to 1 default profile: "default"
2024-10-08 12:16:42 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2024-10-08 12:16:42 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2024-10-08 12:16:42 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2024-10-08 12:16:42 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2024-10-08 12:16:42 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-10-08 12:16:42 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1748 ms
2024-10-08 12:16:43 [main] INFO  liquibase.changelog - Reading from test.DATABASECHANGELOG
2024-10-08 12:16:43 [main] INFO  liquibase.executor - Changelog query completed.
2024-10-08 12:16:44 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2cff5aa3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b6136eb, org.springframework.security.web.context.SecurityContextHolderFilter@117fb9ba, org.springframework.security.web.header.HeaderWriterFilter@1d06801f, org.springframework.web.filter.CorsFilter@2cce10bc, org.springframework.security.web.authentication.logout.LogoutFilter@4f4d05b3, com.ImperioElevator.ordermanagement.security.JwtFilter@8383a14, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41e7a544, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2739ecc0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@73234691, org.springframework.security.web.session.SessionManagementFilter@1fa18f87, org.springframework.security.web.access.ExceptionTranslationFilter@1fe05fff, org.springframework.security.web.access.intercept.AuthorizationFilter@68f9e807]
2024-10-08 12:16:44 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2024-10-08 12:16:44 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2024-10-08 12:16:44 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2024-10-08 12:16:44 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6df31abf]]
2024-10-08 12:16:44 [main] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2024-10-08 12:16:44 [main] INFO  c.I.o.OrderManagementApplication - Started OrderManagementApplication in 4.532 seconds (process running for 5.089)
2024-10-08 12:16:44 [main] INFO  c.I.o.OrderManagementApplication - Application started successfully
2024-10-08 12:16:53 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-08 12:16:53 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-10-08 12:16:53 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:16:53 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:16:53 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 80
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 80
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@980bdf4
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@980bdf4
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@980bdf4
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@980bdf4
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@980bdf4
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@980bdf4
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@980bdf4
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@980bdf4
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@980bdf4
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@980bdf4
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:16:53 [http-nio-8080-exec-1] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:16:53 [http-nio-8080-exec-1] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 80
2024-10-08 12:16:53 [http-nio-8080-exec-1] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 80
2024-10-08 12:17:07 [http-nio-8080-exec-2] WARN  o.s.c.LocalVariableTableParameterNameDiscoverer - Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: com.ImperioElevator.ordermanagement.controller.UserController
2024-10-08 12:17:07 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:17:07 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:17:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:17:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:17:08 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:17:08 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:17:08 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:17:08 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:17:08 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:17:08 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:17:08 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:17:08 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:17:11 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:17:11 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 81
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 81
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@231b05dc
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@231b05dc
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@231b05dc
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@231b05dc
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@231b05dc
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@231b05dc
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@231b05dc
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@231b05dc
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@231b05dc
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@231b05dc
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:17:11 [http-nio-8080-exec-2] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:17:11 [http-nio-8080-exec-2] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 81
2024-10-08 12:17:11 [http-nio-8080-exec-2] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 81
2024-10-08 12:17:44 [MessageBroker-5] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 6], outboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 2], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 9]
2024-10-08 12:17:58 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 12:17:58 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 12:17:58 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 12:17:58 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 12:18:05 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 12:18:05 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 12:18:05 [http-nio-8080-exec-6] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 12:18:05 [http-nio-8080-exec-6] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 12:18:05 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:18:05 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:39:25 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 12:39:25 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by email: SELECT * FROM user WHERE email = ?
2024-10-08 12:39:25 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 12:39:25 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to select UserID by email: SELECT id FROM user WHERE email = ?
2024-10-08 12:39:25 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:39:25 [http-nio-8080-exec-9] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:39:25 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:39:25 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:39:25 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:39:25 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:39:25 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:39:25 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:39:25 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:39:25 [http-nio-8080-exec-1] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:39:39 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:39:39 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:39:39 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:39:39 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:39:39 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:39:39 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:39:39 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:39:39 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:39:40 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:39:40 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:39:42 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:39:42 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:41:32 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:41:32 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:41:32 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:41:32 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:41:32 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:41:32 [http-nio-8080-exec-3] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:41:32 [http-nio-8080-exec-10] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:41:32 [http-nio-8080-exec-10] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:41:32 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:41:32 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:41:32 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:41:32 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:41:32 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:41:32 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:41:32 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:41:32 [http-nio-8080-exec-2] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:41:32 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:41:32 [http-nio-8080-exec-2] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:41:32 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:41:32 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:41:32 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:41:32 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:41:35 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders for User role: SELECT * FROM orders WHERE user_id = ? ORDER BY id ASC LIMIT ?
2024-10-08 12:41:35 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders for User role: SELECT * FROM orders WHERE user_id = ? ORDER BY id ASC LIMIT ?
2024-10-08 12:41:35 [http-nio-8080-exec-6] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders for User role
2024-10-08 12:41:35 [http-nio-8080-exec-6] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders for User role
2024-10-08 12:41:42 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:41:42 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:42:01 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 12:42:01 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Products for main page: SELECT * FROM product WHERE category_type = ? ORDER BY category_type ASC LIMIT ?
2024-10-08 12:42:01 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 12:42:01 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved Products for main page with categoryType: Elevator
2024-10-08 12:42:01 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:42:01 [http-nio-8080-exec-1] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:42:03 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 12:42:03 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find Product by id: SELECT * FROM product WHERE id = ?
2024-10-08 12:42:03 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:42:03 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:42:04 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:42:04 [http-nio-8080-exec-7] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 82
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 82
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@572fa5c8
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@572fa5c8
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@572fa5c8
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@572fa5c8
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@572fa5c8
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@572fa5c8
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@572fa5c8
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@572fa5c8
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@572fa5c8
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@572fa5c8
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:42:04 [http-nio-8080-exec-7] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:42:04 [http-nio-8080-exec-7] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 82
2024-10-08 12:42:04 [http-nio-8080-exec-7] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 82
2024-10-08 12:47:44 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[3 current WS(3)-HttpStream(0)-HttpPoll(0), 5 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(5)-CONNECTED(5)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 39], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 12], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 5, completed tasks = 434]
2024-10-08 12:48:01 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:48:01 [http-nio-8080-exec-8] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:48:01 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:48:01 [http-nio-8080-exec-10] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find User by id: SELECT * FROM user WHERE id = ?
2024-10-08 12:48:01 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:48:01 [http-nio-8080-exec-8] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:48:01 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:48:01 [http-nio-8080-exec-5] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing SQL to find last created Orders: SELECT o.*, u1.username AS creator_username, GROUP_CONCAT(DISTINCT u2.username SEPARATOR ', ') AS operator_username, GROUP_CONCAT(DISTINCT u2.id SEPARATOR ', ') AS operator_user_id FROM orders o LEFT JOIN order_operators oo ON o.id = oo.order_id LEFT JOIN user u1 ON o.user_id = u1.id LEFT JOIN user u2 ON oo.user_id = u2.id GROUP BY o.id, u1.username ORDER BY o.id DESC LIMIT ?
2024-10-08 12:48:01 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:48:01 [http-nio-8080-exec-5] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully retrieved last created Orders
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:48:08 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:48:08 [http-nio-8080-exec-4] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 83
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 83
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@1e7ed830
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@1e7ed830
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e7ed830
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e7ed830
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e7ed830
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e7ed830
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e7ed830
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e7ed830
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e7ed830
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@1e7ed830
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:48:08 [http-nio-8080-exec-4] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:48:08 [http-nio-8080-exec-4] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 83
2024-10-08 12:48:08 [http-nio-8080-exec-4] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 83
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Order received with userId: 1
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Executing creation of the Order: INSERT INTO orders (user_id, created_date, updated_date, order_status) VALUES (?, ?, ?, ?)
2024-10-08 12:48:16 [http-nio-8080-exec-6] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:48:16 [http-nio-8080-exec-6] INFO  c.I.o.dao.daoimpl.ProductDaoImpl - Successfully inserted Order for userId: 1
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 84
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Inserting token for orderId: 84
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.d.daoimpl.NotificationDaoImpl - Inserting the notification in db com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Get management users from the db SELECT u.* FROM user u JOIN user_roles ur ON u.id = ur.user_id JOIN roles r ON ur.role_id = r.id WHERE r.role_name IN ('ADMIN','MANAGER','SALESMAN')
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 6 with payload com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 1 with payload com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 3 with payload com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.dao.daoimpl.ProductDaoImpl - Sending WS notifications to user 4 with payload com.ImperioElevator.ordermanagement.entity.Notification@b4460be
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:48:16 [http-nio-8080-exec-6] DEBUG c.I.o.d.daoimpl.OrderProductDaoImpl - Executing SQL for order product insert: INSERT INTO order_product (order_id, product_name, quantity, price_product, parent_product_id, product_id) VALUES (?, ?, ?, ?, ?, ?)
2024-10-08 12:48:16 [http-nio-8080-exec-6] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 84
2024-10-08 12:48:16 [http-nio-8080-exec-6] INFO  c.I.o.d.daoimpl.OrderProductDaoImpl - Successfully inserted OrderProduct with orderId: 84
